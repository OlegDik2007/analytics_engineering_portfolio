-- db/partitioning.sql
-- optional: partition location_events by month when it grows (5-10GB+)
-- This is a template / plan, not something you must run today.

-- 1) Create new partitioned table (shadow)
-- 2) Create partitions by month
-- 3) Backfill from old table
-- 4) Swap (rename) with minimal downtime

-- WARNING: do this carefully in production.

-- Example skeleton:

-- CREATE TABLE public.location_events_p (
--   LIKE public.location_events INCLUDING ALL
-- ) PARTITION BY RANGE (created_at);

-- CREATE TABLE public.location_events_2026_01 PARTITION OF public.location_events_p
--   FOR VALUES FROM ('2026-01-01') TO ('2026-02-01');

-- CREATE TABLE public.location_events_2026_02 PARTITION OF public.location_events_p
--   FOR VALUES FROM ('2026-02-01') TO ('2026-03-01');

-- etc...
